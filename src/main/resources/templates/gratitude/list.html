<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <title>Title</title>
</head>
<body>
    <div class="layout">

        <!-- Â∑¶„Çµ„Ç§„Éâ„Éê„Éº -->
        <aside class="sidebar">
            <div class="brand">Gratitude</div>

            <nav class="menu">
                <a class="menu-link" th:href="@{/}">
                    <span class="icon">üè†</span><span class="label">„Éõ„Éº„É†</span>
                </a>

                <!-- Ê§úÁ¥¢ ÏÑπÏÖò -->
                <div class="menu-block">
                    <div class="menu-link is-static">
                        <span class="icon">üîç</span><span class="label">Ê§úÁ¥¢</span>
                    </div>

                    <div class="search-mini">
                        <input type="text" id="searchKeyword" placeholder="Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ">
                        <div class="search-row">
                            <select id="sortOrder">
                                <option value="latest">ÊúÄÊñ∞È†Ü</option>
                                <option value="oldest">Âè§„ÅÑÈ†Ü</option>
                            </select>
                            <button type="button" id="btn-search">Ê§úÁ¥¢</button>
                        </div>
                    </div>
                </div>

                <!-- ‰ΩúÊàê -->
                <div class="menu-block">
                    <form th:action="@{/gratitude/new}" method="get" class="menu-link">
                        <span class="icon">üìù</span>
                        <button type="submit" class="link-btn"><span class="label">‰ΩúÊàê</span></button>
                    </form>
                </div>

            </nav>
        </aside>

        <!-- Âè≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main">
            <!-- Toast -->
            <div id="toast"
                 th:if="${flashMessage != null}"
                 th:data-msg="${flashMessage}"
                 class="toast">
            </div>

            <ul id="itemList" class="feed">
                <li th:if="${#lists.isEmpty(items)}" class="empty">ÊäïÁ®ø„Åï„Çå„ÅüË®ò‰∫ã„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</li>

                <li th:each="it : ${items}" class="card">
                    <div class="card-body">
                        <strong class="title" th:text="${it.title}"></strong>
                        <p class="content" th:text="${it.content}"></p>
                    </div>

                    <div class="card-footer">
                        <small class="date" th:text="${#temporals.format(it.createdAt, 'yyyy.MM.dd')}"></small>

                        <div class="actions">
                            <form th:action="@{/gratitude/{id}/edit(id=${it.id})}" method="get">
                                <button type="submit" class="pill">‰øÆÊ≠£</button>
                            </form>

                            <button type="button" class="pill btn-delete" th:attr="data-id=${it.id}">ÂâäÈô§</button>
                        </div>
                    </div>
                </li>
            </ul>
        </main>

    </div>

<script>
    (function () {
      const toast = document.getElementById('toast');
      if (!toast) return;

      const msg = toast.dataset.msg || '';
      toast.textContent = msg;

      requestAnimationFrame(() => {
        toast.style.opacity = '1';
        toast.style.transform = 'translateY(0)';
      });

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(-10px)';
        setTimeout(() => toast.remove(), 300);
      }, 2500);
    })();
</script>

<script th:src="@{/js/api.js}"></script>
</body>

    </html>