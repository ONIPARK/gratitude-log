<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
  <h1>感謝リスト</h1>
  <!-- Toast -->
  <div id="toast"
       th:if="${flashMessage != null}"
       th:data-msg="${flashMessage}"
       style="position:fixed; top:16px; right:16px;
            padding:12px 14px; border:1px solid #333; border-radius:10px;
            background:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.15);
            opacity:0; transform:translateY(-10px);
            transition:opacity .25s ease, transform .25s ease;
            z-index:9999;">
  </div>
  <ul>
    <li th:if="${#lists.isEmpty(items)}">投稿された記事はありません。</li>
    <li th:each="it : ${items}">
      <strong th:text="${it.title}"></strong>
      <small th:text="${#temporals.format(it.createdAt, 'yyyy-MM-dd HH:mm')}"></small>
      <form th:action="@{/gratitude/{id}/edit(id=${it.id})}" method="get" style="display:inline;">
          <button type="submit">修正</button>
      </form>
<!--      <form th:action="@{/gratitude/{id}/delete(id=${it.id})}" method="post" style="display:inline;">-->
<!--          <button type="submit" onclick="return confirm('削除しますか？')">削除</button>-->
<!--      </form>-->
      <button type="button" class="btn-delete" th:attr="data-id=${it.id}">削除</button>
    </li>
  </ul>
  <form th:action="@{/gratitude/new}" method="get" style="display:inline;">
      <button type="submit">作成</button>
  </form>

  <script>
      (function () {
        const toast = document.getElementById('toast');
        if (!toast) return;

        // メッセージ注入
        const msg = toast.dataset.msg || '';
        toast.textContent = msg;

        // 表す
        requestAnimationFrame(() => {
          toast.style.opacity = '1';
          toast.style.transform = 'translateY(0)';
        });
        // 2.5秒後、消える
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translateY(-10px)';
          // DOMから削除
          setTimeout(() => toast.remove(), 300);
            }, 2500);
          })();
  </script>

    </body>
    </html>